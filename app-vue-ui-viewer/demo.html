<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGoat Publisher Viewer Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1rem;
        }
        .content {
            padding: 30px;
        }
        .demo-section {
            margin-bottom: 40px;
        }
        .demo-section h2 {
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .iframe-container {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
        }
        .iframe-container iframe {
            width: 100%;
            border: none;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-bottom: none;
            cursor: pointer;
            margin-right: 5px;
            border-radius: 4px 4px 0 0;
        }
        .tab.active {
            background: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AGoat Publisher Viewer</h1>
            <p>Microfrontend Demo - Embed blog content anywhere</p>
        </div>
        
        <div class="content">
            <div class="demo-section">
                <h2>Posts List Viewer</h2>
                <p>Display a paginated list of blog posts with authentication-aware content.</p>
                
                <div class="tabs">
                    <div class="tab active" onclick="showTab('list-demo')">Demo</div>
                    <div class="tab" onclick="showTab('list-code')">Code</div>
                </div>
                
                <div id="list-demo" class="tab-content active">
                    <div class="iframe-container">
                        <iframe 
                            src="http://localhost:5175/?mode=list&page=1&limit=5&showPublishedOnly=true"
                            height="600"
                            title="Posts List Viewer">
                        </iframe>
                    </div>
                </div>
                
                <div id="list-code" class="tab-content">
                    <div class="code-block">
&lt;iframe 
    src="http://localhost:5175/?mode=list&page=1&limit=5&showPublishedOnly=true"
    width="100%" 
    height="600"
    frameborder="0"&gt;
&lt;/iframe&gt;
                    </div>
                </div>
            </div>
            
            <div class="demo-section">
                <h2>Single Post Viewer</h2>
                <p>Display a single blog post with markdown rendering and authentication controls.</p>
                
                <div class="tabs">
                    <div class="tab active" onclick="showTab('single-demo')">Demo</div>
                    <div class="tab" onclick="showTab('single-code')">Code</div>
                </div>
                
                <div id="single-demo" class="tab-content active">
                    <div class="iframe-container">
                        <iframe 
                            src="http://localhost:5175/?mode=single&postSlug=welcome-to-agoat-blog"
                            height="600"
                            title="Single Post Viewer">
                        </iframe>
                    </div>
                </div>
                
                <div id="single-code" class="tab-content">
                    <div class="code-block">
&lt;iframe 
    src="http://localhost:5175/?mode=single&postSlug=welcome-to-agoat-blog"
    width="100%" 
    height="600"
    frameborder="0"&gt;
&lt;/iframe&gt;
                    </div>
                </div>
            </div>
            
            <div class="demo-section">
                <h2>Configuration Options</h2>
                <p>The viewer can be customized with various URL parameters:</p>
                
                <div class="code-block">
<b>View Modes:</b>
- mode=list          # Show posts list
- mode=single        # Show single post

<b>Single Post:</b>
- postId=123         # Load by post ID
- postSlug=my-post   # Load by post slug

<b>Posts List:</b>
- page=1             # Page number
- limit=10           # Posts per page
- showPublishedOnly=true  # Show only published posts

<b>Authentication:</b>
- isAuthenticated=true    # User login status
- maxContentLength=800    # Content truncation for anonymous users
- showLoginPrompt=true    # Show login prompts

<b>API Configuration:</b>
- apiUrl=https://api.example.com  # Custom API endpoint
                </div>
            </div>
            
            <div class="demo-section">
                <h2>JavaScript API</h2>
                <p>Control the viewer programmatically using postMessage:</p>
                
                <div class="code-block">
// Set configuration
window.postMessage({
  type: 'set-config',
  apiUrl: 'https://api.example.com',
  isAuthenticated: true,
  maxContentLength: 1000
}, '*')

// Show single post by ID
window.postMessage({
  type: 'set-post-id',
  postId: '123'
}, '*')

// Show single post by slug
window.postMessage({
  type: 'set-post-slug',
  postSlug: 'my-post-title'
}, '*')

// Switch to list view
window.postMessage({
  type: 'set-view-mode',
  mode: 'list'
}, '*')

// Listen for events
window.addEventListener('message', (event) => {
  if (event.data.type === 'post-loaded') {
    console.log('Post loaded:', event.data.post)
  } else if (event.data.type === 'login-requested') {
    window.location.href = '/login'
  }
})
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabId) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabId).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }
    </script>
</body>
</html>




