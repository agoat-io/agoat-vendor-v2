"use strict";(self.webpackChunkreactjs_public_viewer=self.webpackChunkreactjs_public_viewer||[]).push([[525],{525:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(318),l=s(330),r=s.n(l),n=s(813),d=s(977),i=s(893);const o=e=>{let{postId:t,postSlug:s,apiUrl:l="http://localhost:8080/api",showLoginPrompt:o=!0,maxContentLength:c=800,isAuthenticated:m=!1,onLoginRequested:u,onPostLoaded:x,onError:h}=e;const[p,g]=(0,a.useState)(null),[b,f]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),N=(0,a.useCallback)(async()=>{f(!0),v(null);try{let e="".concat(l,"/posts");if(t)e+="/".concat(t);else{if(!s)throw new Error("Either postId or postSlug must be provided");e+="/slug/".concat(s)}const a=await r().get(e);if(!a.data||!a.data.data)throw new Error("Post not found");{const e=a.data.data;g(e);const t={id:e.id,title:e.title,content:e.content,slug:e.slug,published:e.published,created_at:e.created_at,updated_at:e.updated_at,user_id:e.user_id||"",author:e.author};null===x||void 0===x||x(t)}}catch(n){var e,a;const t=(null===(e=n.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||n.message||"Failed to load post";v(t),null===h||void 0===h||h(t)}finally{f(!1)}},[t,s,l,x,h]);return(0,a.useEffect)(()=>{(t||s)&&N()},[N,t,s]),b?(0,i.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,i.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading post..."})]}):j?(0,i.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,i.jsx)("div",{className:"ml-3",children:(0,i.jsx)("p",{className:"text-sm text-red-800",children:j})})]})}):p?(0,i.jsx)("div",{className:"viewer-container",children:(0,i.jsxs)("article",{className:"prose prose-sm sm:prose-base lg:prose-lg max-w-none",itemScope:!0,itemType:"https://schema.org/BlogPosting",children:[(0,i.jsxs)("header",{className:"mb-6 sm:mb-8",children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-3 sm:mb-4 leading-tight",itemProp:"headline",children:p.title}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center text-xs sm:text-sm text-gray-500 space-y-1 sm:space-y-0 sm:space-x-4",children:[(0,i.jsxs)("span",{itemProp:"author",children:["By ",p.author||"Admin"]}),(0,i.jsx)("span",{className:"hidden sm:inline",children:"\u2022"}),(0,i.jsx)("time",{dateTime:p.created_at,itemProp:"datePublished",children:y(p.created_at)}),p.updated_at&&p.updated_at!==p.created_at&&(0,i.jsxs)("time",{dateTime:p.updated_at,itemProp:"dateModified",className:"hidden sm:inline",children:["\u2022 Updated ",y(p.updated_at)]})]})]}),(0,i.jsx)("div",{className:"prose prose-lg max-w-none",itemProp:"articleBody",dangerouslySetInnerHTML:{__html:(()=>{if(!p)return"";let e=p.content;return!m&&e.length>c&&(e=e.substring(0,c)+"..."),d.A.sanitize(n.marked.parse(e))})()}}),o&&!m&&p&&p.content.length>c&&(0,i.jsxs)("div",{className:"mt-6 sm:mt-8 p-4 sm:p-6 bg-gray-50 rounded-lg border",children:[(0,i.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"Want to read more?"}),(0,i.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:"Sign in to access the full article and discover more great content."}),(0,i.jsx)("button",{onClick:u,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 w-full sm:w-auto",children:"Sign In"})]})]})}):(0,i.jsx)("div",{className:"text-center py-12",children:(0,i.jsx)("p",{className:"text-gray-500",children:"Post not found"})})}}}]);
//# sourceMappingURL=525.fc0ce54f.chunk.js.map