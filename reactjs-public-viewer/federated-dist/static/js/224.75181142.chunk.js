"use strict";(self.webpackChunkreactjs_public_viewer=self.webpackChunkreactjs_public_viewer||[]).push([[224],{224:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(318),l=s(330),i=s.n(l),r=s(813),n=s(977),d=s(893);const o=e=>{let{apiUrl:t="http://localhost:8080/api",showPublishedOnly:s=!0,page:l=1,limit:o=10,isAuthenticated:c=!1,maxContentLength:m=300,onPostClicked:x,onPostsLoaded:h,onError:p}=e;const[u,g]=(0,a.useState)([]),[v,b]=(0,a.useState)(!1),[f,j]=(0,a.useState)(null),[y,N]=(0,a.useState)(l),[w,P]=(0,a.useState)(1),[,L]=(0,a.useState)(0),k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),S=e=>{let t=e;return!c&&t.length>m&&(t=t.substring(0,m)+"..."),n.A.sanitize(r.marked.parse(t))},_=(0,a.useCallback)(async()=>{console.log("PostsList: Fetching posts with params:",{apiUrl:t,page:y,limit:o,showPublishedOnly:s||!c}),b(!0),j(null);try{const l=new URLSearchParams({page:y.toString(),limit:o.toString()});!s&&c||l.append("published","true");const r="".concat(t,"/posts?").concat(l);console.log("PostsList: Making request to:",r);const n=await i().get(r);var e,a;if(n.data&&n.data.data)g(n.data.data),L((null===(e=n.data.meta)||void 0===e?void 0:e.total)||n.data.data.length),P((null===(a=n.data.meta)||void 0===a?void 0:a.total_pages)||Math.ceil(n.data.data.length/o)),console.log("PostsList: Loaded posts:",n.data.data.length),null===h||void 0===h||h(n.data.data);else g([])}catch(n){var l,r;const e=(null===(l=n.response)||void 0===l||null===(r=l.data)||void 0===r?void 0:r.message)||n.message||"Failed to load posts";j(e),null===p||void 0===p||p(e)}finally{b(!1)}},[t,y,o,s,c,h,p]),C=e=>{e>=1&&e<=w&&N(e)},M=e=>{const t="".concat(e.slug,"/").concat(e.id),s=new URL(window.location.href);s.searchParams.set("post-path",t),window.history.pushState({},"",s.toString()),null===x||void 0===x||x(e)};return(0,a.useEffect)(()=>{_()},[_]),(0,a.useEffect)(()=>{N(l)},[l]),v?(0,d.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,d.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading posts..."})]}):f?(0,d.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,d.jsx)("div",{className:"ml-3",children:(0,d.jsx)("p",{className:"text-sm text-red-800",children:f})})]})}):0===u.length?(0,d.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[(0,d.jsx)("svg",{className:"mx-auto h-10 w-10 sm:h-12 sm:w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,d.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No posts found"}),(0,d.jsx)("p",{className:"mt-1 text-xs sm:text-sm text-gray-500",children:"There are no posts available at the moment."})]}):(0,d.jsx)("div",{className:"viewer-container",children:(0,d.jsxs)("div",{className:"posts-list",children:[(0,d.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,d.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Latest Posts"}),(0,d.jsx)("p",{className:"text-sm sm:text-base text-gray-600",children:"Discover our latest articles and insights"})]}),(0,d.jsx)("div",{className:"grid gap-4 sm:gap-6 lg:gap-8",children:u.map(e=>(0,d.jsxs)("article",{className:"post-card bg-white border border-gray-200 rounded-lg p-4 sm:p-6 hover:shadow-md transition-shadow",itemScope:!0,itemType:"https://schema.org/BlogPosting",children:[(0,d.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,d.jsx)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 mb-2 leading-tight",itemProp:"headline",children:(0,d.jsx)("button",{onClick:()=>M(e),className:"hover:text-blue-600 transition-colors text-left w-full",children:e.title})}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center text-xs sm:text-sm text-gray-500 space-y-1 sm:space-y-0 sm:space-x-4",children:[(0,d.jsxs)("span",{itemProp:"author",children:["By ",e.author||"Admin"]}),(0,d.jsxs)("time",{dateTime:e.created_at,itemProp:"datePublished",children:["Published ",k(e.created_at)]}),e.updated_at&&e.updated_at!==e.created_at&&(0,d.jsxs)("time",{dateTime:e.updated_at,itemProp:"dateModified",className:"hidden sm:inline",children:["\u2022 Updated ",k(e.updated_at)]})]})]}),(0,d.jsx)("div",{className:"post-preview mb-3 sm:mb-4",itemProp:"description",children:(0,d.jsx)("div",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:S(e.content)}})}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-2 sm:space-y-0",children:[(0,d.jsx)("button",{onClick:()=>M(e),className:"text-blue-600 hover:text-blue-800 font-medium text-sm sm:text-base text-left",children:c?"Read full article":"Read more"}),!c&&e.content.length>m&&(0,d.jsxs)("div",{className:"text-xs sm:text-sm text-gray-500",children:[Math.ceil(e.content.length/100)," min read"]})]})]},e.id))}),w>1&&(0,d.jsx)("div",{className:"mt-6 sm:mt-8 flex justify-center",children:(0,d.jsxs)("nav",{className:"flex items-center space-x-1 sm:space-x-2",role:"navigation","aria-label":"Pagination",children:[y>1&&(0,d.jsx)("a",{href:"?page=".concat(y-1),onClick:e=>{e.preventDefault(),C(y-1)},className:"px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50",rel:"prev",children:"Previous"}),(0,d.jsxs)("span",{className:"px-2 sm:px-3 py-2 text-xs sm:text-sm text-gray-700",children:["Page ",y," of ",w]}),y<w&&(0,d.jsx)("a",{href:"?page=".concat(y+1),onClick:e=>{e.preventDefault(),C(y+1)},className:"px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50",rel:"next",children:"Next"})]})})]})})}}}]);
//# sourceMappingURL=224.75181142.chunk.js.map