"use strict";(self.webpackChunkreactjs_public_viewer=self.webpackChunkreactjs_public_viewer||[]).push([[578],{578:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var s=a(850),l=a.n(s),r=a(215),n=a.n(r),m=a(824);const o=e=>{let{apiUrl:t="http://localhost:8080/api",showPublishedOnly:a=!0,page:r=1,limit:o=10,isAuthenticated:c=!1,maxContentLength:i=300,onPostClicked:d,onPostsLoaded:p,onError:x}=e;const[u,g]=(0,s.useState)([]),[h,v]=(0,s.useState)(!1),[b,f]=(0,s.useState)(null),[y,E]=(0,s.useState)(r),[N,w]=(0,s.useState)(1),[,P]=(0,s.useState)(0),k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),L=e=>{let t=e;return!c&&t.length>i&&(t=t.substring(0,i)+"..."),m.marked.parse(t)},S=(0,s.useCallback)(async()=>{console.log("PostsList: Fetching posts with params:",{apiUrl:t,page:y,limit:o,showPublishedOnly:a||!c}),v(!0),f(null);try{const l=new URLSearchParams({page:y.toString(),limit:o.toString()});!a&&c||l.append("published","true");const r="".concat(t,"/posts?").concat(l);console.log("PostsList: Making request to:",r);const m=await n().get(r);var e,s;m.data&&m.data.data?(g(m.data.data),P((null===(e=m.data.meta)||void 0===e?void 0:e.total)||m.data.data.length),w((null===(s=m.data.meta)||void 0===s?void 0:s.total_pages)||Math.ceil(m.data.data.length/o)),console.log("PostsList: Loaded posts:",m.data.data.length),null==p||p(m.data.data)):g([])}catch(e){var l;const t=(null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)||e.message||"Failed to load posts";f(t),null==x||x(t)}finally{v(!1)}},[t,y,o,a,c,p,x]),_=e=>{e>=1&&e<=N&&E(e)},C=e=>{const t="".concat(e.slug,"/").concat(e.id),a=new URL(window.location.href);a.searchParams.set("post-path",t),window.history.pushState({},"",a.toString()),null==d||d(e)};return(0,s.useEffect)(()=>{S()},[S]),(0,s.useEffect)(()=>{E(r)},[r]),h?l().createElement("div",{className:"flex justify-center items-center py-12"},l().createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),l().createElement("span",{className:"ml-3 text-gray-600"},"Loading posts...")):b?l().createElement("div",{className:"bg-red-50 border border-red-200 rounded-md p-4"},l().createElement("div",{className:"flex"},l().createElement("div",{className:"flex-shrink-0"},l().createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},l().createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),l().createElement("div",{className:"ml-3"},l().createElement("p",{className:"text-sm text-red-800"},b)))):0===u.length?l().createElement("div",{className:"text-center py-8 sm:py-12"},l().createElement("svg",{className:"mx-auto h-10 w-10 sm:h-12 sm:w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),l().createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No posts found"),l().createElement("p",{className:"mt-1 text-xs sm:text-sm text-gray-500"},"There are no posts available at the moment.")):l().createElement("div",{className:"viewer-container"},l().createElement("div",{className:"posts-list"},l().createElement("div",{className:"mb-6 sm:mb-8"},l().createElement("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2"},"Latest Posts"),l().createElement("p",{className:"text-sm sm:text-base text-gray-600"},"Discover our latest articles and insights")),l().createElement("div",{className:"grid gap-4 sm:gap-6 lg:gap-8"},u.map(e=>l().createElement("article",{key:e.id,className:"post-card bg-white border border-gray-200 rounded-lg p-4 sm:p-6 hover:shadow-md transition-shadow",itemScope:!0,itemType:"https://schema.org/BlogPosting"},l().createElement("div",{className:"mb-3 sm:mb-4"},l().createElement("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 mb-2 leading-tight",itemProp:"headline"},l().createElement("button",{onClick:()=>C(e),className:"hover:text-blue-600 transition-colors text-left w-full"},e.title)),l().createElement("div",{className:"flex flex-col sm:flex-row sm:items-center text-xs sm:text-sm text-gray-500 space-y-1 sm:space-y-0 sm:space-x-4"},l().createElement("span",{itemProp:"author"},"By ",e.author||"Admin"),l().createElement("time",{dateTime:e.created_at,itemProp:"datePublished"},"Published ",k(e.created_at)),e.updated_at&&e.updated_at!==e.created_at&&l().createElement("time",{dateTime:e.updated_at,itemProp:"dateModified",className:"hidden sm:inline"},"â€¢ Updated ",k(e.updated_at)))),l().createElement("div",{className:"post-preview mb-3 sm:mb-4",itemProp:"description"},l().createElement("div",{className:"text-sm sm:text-base text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:L(e.content)}})),l().createElement("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-2 sm:space-y-0"},l().createElement("button",{onClick:()=>C(e),className:"text-blue-600 hover:text-blue-800 font-medium text-sm sm:text-base text-left"},c?"Read full article":"Read more"),!c&&e.content.length>i&&l().createElement("div",{className:"text-xs sm:text-sm text-gray-500"},Math.ceil(e.content.length/100)," min read"))))),N>1&&l().createElement("div",{className:"mt-6 sm:mt-8 flex justify-center"},l().createElement("nav",{className:"flex items-center space-x-1 sm:space-x-2",role:"navigation","aria-label":"Pagination"},y>1&&l().createElement("a",{href:"?page=".concat(y-1),onClick:e=>{e.preventDefault(),_(y-1)},className:"px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50",rel:"prev"},"Previous"),l().createElement("span",{className:"px-2 sm:px-3 py-2 text-xs sm:text-sm text-gray-700"},"Page ",y," of ",N),y<N&&l().createElement("a",{href:"?page=".concat(y+1),onClick:e=>{e.preventDefault(),_(y+1)},className:"px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50",rel:"next"},"Next")))))}}}]);